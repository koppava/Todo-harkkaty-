<!DOCTYPE html>
<!-- To run the current sample code in your own environment, copy this to an html page. -->

<html>
<head>
    <title>Todo Harkka</title>
    <script src="http://code.jquery.com/jquery.js"></script>
    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
    <!-- Pick a theme, load the plugin & initialize plugin -->
    <link href="scripts/tablesorter/themes/blue/style.css" rel="stylesheet">
    <script src="scripts/tablesorter/jquery.tablesorter.js"></script>
    
    <script src="scripts/jsviews.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="result"></div>

<script id="theTmpl" type="text/x-jsrender">
{{for tasks}}
    <tr>
        <td>{{:taskName}}</td>\n\
        <td>{{:assignee}}</td>\n\
        <td>{{:deadline}}</td>\n\
        <td>{{if done == 1}}<span class="green">Done</span>{{else}}<span class="red">Unfinished</span>{{/if}}</td>
        <td><button class="btn btn-primary">Edit</button><button class="btn btn-warning">Delete</button></td>
    </tr>
{{/for}}
</script>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content row">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Add ToDo Item</h4>
            </div>
            <div class="modal-body">
                <label for="task-name" class="col-xs-6">Task Name:</label>
                <input id="task-name" class="col-xs-5" type="text" />
                <label for="assignee" class="col-xs-6">Assignee:</label>
                <input id="assignee" class="col-xs-5" type="text" />
                <label for="deadline" class="col-xs-6">Deadline:</label>
                <input id="deadline" class="col-xs-5" type="text" />
                <button class="btn btn-primary pull-right">Save</button>
            </div>
        </div>
    </div>
</div>

<button class="add-todo btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Add ToDo item</button>
<table class="tablesorter">
    <thead>
        <tr>
            <th>Task Name</th>
            <th>Assignee</th>
            <th>Deadline</th>
            <th>Done</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="todo-table-content">
    </tbody>
</table>

<script>
    $.getJSON('index.php', function(data){
        var template = $.templates("#theTmpl");
        template.link("#todo-table-content", data);
        
        $('table').tablesorter({
                usNumberFormat : false,
                sortReset      : true,
                sortRestart    : true
        });
    });
    
    $('.add-todo').on('click', function() {
        console.log('Adding new ToDo item');
    });
    
</script>

</body>
</html>
