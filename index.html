<!DOCTYPE html>
<!-- To run the current sample code in your own environment, copy this to an html page. -->

<html>
<head>
    <title>Todo Harkka</title>
    <script src="http://code.jquery.com/jquery.js"></script>
    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
    <!-- Pick a theme, load the plugin & initialize plugin -->
    <link href="scripts/tablesorter/themes/blue/style.css" rel="stylesheet">
    <script src="scripts/tablesorter/jquery.tablesorter.js"></script>
    
    <script src="scripts/jsviews.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="result"></div>

<script id="theTmpl" type="text/x-jsrender">
{{for tasks}}
    <tr>
        <td>{{:taskName}}</td>\n\
        <td>{{:assignee}}</td>\n\
        <td>{{:deadline}}</td>\n\
        <td>{{if done == 1}}<span class="green">Done</span>{{else}}<span class="red">Unfinished</span>{{/if}}</td>
        <td><button class="btn btn-primary">Edit</button><button class="btn btn-warning">Delete</button></td>
    </tr>
{{/for}}
</script>

<script>
    $.getJSON('index.php', function(data){
        var template = $.templates("#theTmpl");
        template.link("#todo-table-content", data);
        
        $('table').tablesorter({
                usNumberFormat : false,
                sortReset      : true,
                sortRestart    : true
        });
    });
</script>

<table class="tablesorter">
    <thead>
        <tr>
            <th>Task Name</th>
            <th>Assignee</th>
            <th>Deadline</th>
            <th>Done</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="todo-table-content">
    </tbody>
</table>
<button class="btn btn-primary">Add</button>
</body>
</html>
